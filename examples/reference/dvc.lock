schema: '2.0'
stages:
  prepare-mnist:
    cmd: cd step3 && python3 prepare_mnist.py
    deps:
    - path: data/fashion-mnist/t10k-images-idx3-ubyte.gz
      md5: 3f731c1801c9c24603b743b45115403d
      size: 4422102
    - path: data/fashion-mnist/t10k-labels-idx1-ubyte.gz
      md5: 070f191891f2e14396b11a9b89cb244b
      size: 5148
    - path: data/fashion-mnist/train-images-idx3-ubyte.gz
      md5: fc6c9afc03e7c02ddd265b252524d461
      size: 26421880
    - path: data/fashion-mnist/train-labels-idx1-ubyte.gz
      md5: b64ffa39d1f5c4d34e7f75a48149c485
      size: 29515
    - path: step3/prepare_mnist.py
      md5: 3d28d46f73313352709d2546bd14c564
      size: 407
    outs:
    - path: data/fashion-mnist/test.pickle
      md5: 4f906f1bc3b6d93e307c1b4a7b6f619e
      size: 15732252
    - path: data/fashion-mnist/train.pickle
      md5: c335f4377b79b4e6deebf13a52d69653
      size: 94393152
  train:
    cmd: cd step3 && python3 train-vertex.py
    deps:
    - path: data/fashion-mnist/test.pickle
      md5: 4f906f1bc3b6d93e307c1b4a7b6f619e
      size: 15732252
    - path: data/fashion-mnist/train.pickle
      md5: c335f4377b79b4e6deebf13a52d69653
      size: 94393152
    - path: step3/train-vertex.py
      md5: b430a1d9db997b1b90e97666cba29880
      size: 1955
    params:
      params.yaml:
        train.n_neighbours: 7
    outs:
    - path: metrics.json
      md5: 4928f52f402b3665c5ead52b4c197421
      size: 23
    - path: model/vertex_model.json
      md5: afe4b745c7e97f036b4b9b2c6c4b3cf7
      size: 89
